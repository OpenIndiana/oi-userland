Backport of:

From 87a2c140ca54c5128093377e9b25a5c24b346727 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Sebastian=20Dr=C3=B6ge?= <sebastian@centricular.com>
Date: Thu, 1 Dec 2016 13:38:16 +0200
Subject: [PATCH] aacparse: Make sure we have enough data in the codec_data to
 be able to parse it

Also error out cleanly if mapping the buffer failed.

https://bugzilla.gnome.org/show_bug.cgi?id=775450
---
 gst/audioparsers/gstaacparse.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

Index: gst-plugins-good0.10-0.10.31/gst/audioparsers/gstaacparse.c
===================================================================
--- gst-plugins-good0.10-0.10.31.orig/gst/audioparsers/gstaacparse.c	2017-03-23 10:52:14.888585742 -0400
+++ gst-plugins-good0.10-0.10.31/gst/audioparsers/gstaacparse.c	2017-03-23 10:53:20.697394854 -0400
@@ -243,7 +243,7 @@
   if (value) {
     GstBuffer *buf = gst_value_get_buffer (value);
 
-    if (buf) {
+    if (buf && GST_BUFFER_SIZE (buf) >= 2) {
       const guint8 *buffer = GST_BUFFER_DATA (buf);
       guint sr_idx;
 
