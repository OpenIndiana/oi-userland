#
# This file and its contents are supplied under the terms of the
# Common Development and Distribution License ("CDDL"), version 1.0.
# You may only use this file in accordance with the terms of version
# 1.0 of the CDDL.
#
# A full copy of the text of the CDDL should have accompanied this
# source.  A copy of the CDDL is also available via the Internet at
# http://www.illumos.org/license/CDDL.
#

#
# Copyright 2018 Aurelien Larcher
# Copyright 2020 Michal Nowak
# Copyright 2020 Till Wegm√ºller
#

set name=pkg.fmri value=pkg:/$(COMPONENT_FMRI)@$(IPS_COMPONENT_VERSION),$(BUILD_VERSION)
set name=pkg.summary value="$(COMPONENT_SUMMARY)"
set name=info.classification value="$(COMPONENT_CLASSIFICATION)"
set name=info.upstream-url value=$(COMPONENT_PROJECT_URL)
set name=info.source-url value=$(COMPONENT_ARCHIVE_URL)
set name=org.opensolaris.consolidation value=$(CONSOLIDATION)

license $(COMPONENT_LICENSE_FILE) license='$(COMPONENT_LICENSE)'

# 64-bit libraries are installed in /usr/lib/rustlib/$(RUST_ARCH), rustc build system breaks otherwise
<transform file path=usr/lib/rustlib/$(RUST_ARCH)/lib/.*.so.* -> default pkg.linted.userland.action001.2 true >
<transform file path=usr/lib/rustlib/$(RUST_ARCH)/codegen-backends/.*.so.* -> default pkg.linted.userland.action001.2 true >
<transform file path=usr/lib/rustlib/$(RUST_ARCH)/codegen-backends/.*.so.* -> default pkg.linted.userland.action001.3 true >
# Ignore ORIGIN in library runpaths
<transform file path=usr/lib/rustlib/$(RUST_ARCH)/lib/.*.so.* -> default pkg.linted.userland.action001.3 true >
# 32-bit runpath in 64-bit binary: usr/bin/cargo includes '/usr/lib/rustlib/x86_64-sun-solaris/lib'
<transform file path=usr/bin/.* -> default pkg.linted.userland.action001.3 true >

# Use OI's default directory for completions
file etc/bash_completion.d/cargo path=usr/share/bash-completion/completions/cargo

# Manual copy from build/amd64/build/x86_64-sun-solaris/stage2/lib/rustlib/x86_64-sun-solaris/lib/librustc_driver-61711cbc9b978200.so
link path=usr/lib/$(MACH64)/librustc_driver-61711cbc9b978200.so \
    target=../rustlib/x86_64-sun-solaris/lib/librustc_driver-61711cbc9b978200.so
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/librustc_driver-61711cbc9b978200.so

# Use OI's default directory for zsh completions
file usr/share/zsh/site-functions/_cargo path=usr/share/zsh/vendor-functions/_cargo

file path=usr/bin/cargo
file path=usr/bin/cargo-clippy
file path=usr/bin/cargo-fmt
file path=usr/bin/cargo-miri
file path=usr/bin/clippy-driver pkg.depend.bypass-generate=.*
file path=usr/bin/miri pkg.depend.bypass-generate=.*
file path=usr/bin/rls pkg.depend.bypass-generate=.*
file path=usr/bin/rust-gdb
file path=usr/bin/rust-gdbgui
file path=usr/bin/rust-lldb
file path=usr/bin/rustc pkg.depend.bypass-generate=.*
file path=usr/bin/rustdoc pkg.depend.bypass-generate=.*
file path=usr/bin/rustfmt
link path=usr/lib/$(MACH64)/libstd-d4f447d836146943.so \
    target=../rustlib/x86_64-sun-solaris/lib/libstd-d4f447d836146943.so
link path=usr/lib/$(MACH64)/libtest-0f638c18f226151a.so \
    target=../rustlib/x86_64-sun-solaris/lib/libtest-0f638c18f226151a.so
file path=usr/lib/rustlib/components
file path=usr/lib/rustlib/etc/debugger_pretty_printers_common.py
file path=usr/lib/rustlib/etc/gdb_load_rust_pretty_printers.py
file path=usr/lib/rustlib/etc/gdb_rust_pretty_printing.py
file path=usr/lib/rustlib/etc/lldb_rust_formatters.py
file path=usr/lib/rustlib/manifest-cargo
file path=usr/lib/rustlib/manifest-clippy-preview
file path=usr/lib/rustlib/manifest-miri-preview
file path=usr/lib/rustlib/manifest-rls-preview
file path=usr/lib/rustlib/manifest-rust-analysis-x86_64-sun-solaris
file path=usr/lib/rustlib/manifest-rust-std-x86_64-sun-solaris
file path=usr/lib/rustlib/manifest-rustc
file path=usr/lib/rustlib/manifest-rustfmt-preview
file path=usr/lib/rustlib/rust-installer-version
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/liballoc-8584ba867da06c00.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/libbacktrace-bde42dadf0a47aa9.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/libbacktrace_sys-175d885825354a19.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/libcfg_if-f797b452f19e89e6.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/libcompiler_builtins-0f756b5b8ceb78a2.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/libcore-831d6c6883a56cf8.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/libgetopts-c46b68ccd0937d9e.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/libhashbrown-32be389d1b11031b.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/liblibc-57f39e9ad15b3e7a.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/libpanic_abort-e171541501613f75.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/libpanic_unwind-66e5b2bf35283852.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/libproc_macro-cb8fda79427db2b3.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/librustc_demangle-d2a6dabe05eecf19.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/librustc_std_workspace_alloc-2d06b8b04ea3f155.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/librustc_std_workspace_core-5fa9a229a8db66ab.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/librustc_std_workspace_std-79aa2fa931be33aa.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/libstd-d4f447d836146943.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/libterm-25c5d3802328cea9.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/libtest-0f638c18f226151a.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/libunicode_width-8ec47c7c07f2473e.json
file path=usr/lib/rustlib/x86_64-sun-solaris/analysis/libunwind-bb0f20a84bf09175.json
file path=usr/lib/rustlib/x86_64-sun-solaris/codegen-backends/librustc_codegen_llvm-llvm.so pkg.depend.bypass-generate=.*
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/liballoc-8584ba867da06c00.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libbacktrace-bde42dadf0a47aa9.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libbacktrace_sys-175d885825354a19.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libcfg_if-f797b452f19e89e6.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libcompiler_builtins-0f756b5b8ceb78a2.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libcore-831d6c6883a56cf8.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libgetopts-c46b68ccd0937d9e.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libhashbrown-32be389d1b11031b.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/liblibc-57f39e9ad15b3e7a.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libpanic_abort-e171541501613f75.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libpanic_unwind-66e5b2bf35283852.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libproc_macro-cb8fda79427db2b3.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/librustc_demangle-d2a6dabe05eecf19.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/librustc_std_workspace_alloc-2d06b8b04ea3f155.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/librustc_std_workspace_core-5fa9a229a8db66ab.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/librustc_std_workspace_std-79aa2fa931be33aa.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libstd-d4f447d836146943.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libstd-d4f447d836146943.so
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libterm-25c5d3802328cea9.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libtest-0f638c18f226151a.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libtest-0f638c18f226151a.so
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libunicode_width-8ec47c7c07f2473e.rlib
file path=usr/lib/rustlib/x86_64-sun-solaris/lib/libunwind-bb0f20a84bf09175.rlib
file path=usr/share/doc/rust-$(COMPONENT_VERSION)/COPYRIGHT
file path=usr/share/doc/rust-$(COMPONENT_VERSION)/LICENSE-APACHE
file path=usr/share/doc/rust-$(COMPONENT_VERSION)/LICENSE-APACHE.old
file path=usr/share/doc/rust-$(COMPONENT_VERSION)/LICENSE-MIT
file path=usr/share/doc/rust-$(COMPONENT_VERSION)/LICENSE-MIT.old
file path=usr/share/doc/rust-$(COMPONENT_VERSION)/LICENSE-THIRD-PARTY
file path=usr/share/doc/rust-$(COMPONENT_VERSION)/README.md
file path=usr/share/doc/rust-$(COMPONENT_VERSION)/README.md.old
file path=usr/share/man/man1/cargo-bench.1
file path=usr/share/man/man1/cargo-build.1
file path=usr/share/man/man1/cargo-check.1
file path=usr/share/man/man1/cargo-clean.1
file path=usr/share/man/man1/cargo-doc.1
file path=usr/share/man/man1/cargo-fetch.1
file path=usr/share/man/man1/cargo-fix.1
file path=usr/share/man/man1/cargo-generate-lockfile.1
file path=usr/share/man/man1/cargo-help.1
file path=usr/share/man/man1/cargo-init.1
file path=usr/share/man/man1/cargo-install.1
file path=usr/share/man/man1/cargo-locate-project.1
file path=usr/share/man/man1/cargo-login.1
file path=usr/share/man/man1/cargo-metadata.1
file path=usr/share/man/man1/cargo-new.1
file path=usr/share/man/man1/cargo-owner.1
file path=usr/share/man/man1/cargo-package.1
file path=usr/share/man/man1/cargo-pkgid.1
file path=usr/share/man/man1/cargo-publish.1
file path=usr/share/man/man1/cargo-run.1
file path=usr/share/man/man1/cargo-rustc.1
file path=usr/share/man/man1/cargo-rustdoc.1
file path=usr/share/man/man1/cargo-search.1
file path=usr/share/man/man1/cargo-test.1
file path=usr/share/man/man1/cargo-uninstall.1
file path=usr/share/man/man1/cargo-update.1
file path=usr/share/man/man1/cargo-vendor.1
file path=usr/share/man/man1/cargo-verify-project.1
file path=usr/share/man/man1/cargo-version.1
file path=usr/share/man/man1/cargo-yank.1
file path=usr/share/man/man1/cargo.1
file path=usr/share/man/man1/rustc.1
file path=usr/share/man/man1/rustdoc.1

