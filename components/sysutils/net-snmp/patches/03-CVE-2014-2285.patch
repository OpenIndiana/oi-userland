commit 76e8d6d100320629d8a23be4b0128619600c919d
Author: Jan Safranek <jsafranek@users.sourceforge.net>
Date:   Thu Mar 6 09:21:51 2014 +0100

    CHANGES: snmpd: PATCH: 1275: from Viliam Púčik: fixed Perl trap handler when processing trap with empty community string.

Index: net-snmp-5.4.3~dfsg/perl/TrapReceiver/TrapReceiver.xs
===================================================================
--- net-snmp-5.4.3~dfsg.orig/perl/TrapReceiver/TrapReceiver.xs	2014-03-11 09:55:51.916244312 -0400
+++ net-snmp-5.4.3~dfsg/perl/TrapReceiver/TrapReceiver.xs	2014-03-11 09:57:05.348246279 -0400
@@ -76,18 +76,18 @@
         STOREPDUi("securitymodel", pdu->securityModel);
         STOREPDUi("securitylevel", pdu->securityLevel);
         STOREPDU("contextName",
-                 newSVpv(pdu->contextName, pdu->contextNameLen));
+                 newSVpv(pdu->contextName ? pdu->contextName : "", pdu->contextNameLen));
         STOREPDU("contextEngineID",
-                 newSVpv(pdu->contextEngineID,
+                 newSVpv(pdu->contextEngineID ? (char *) pdu->contextEngineID : "",
                                     pdu->contextEngineIDLen));
         STOREPDU("securityEngineID",
-                 newSVpv(pdu->securityEngineID,
+                 newSVpv(pdu->securityEngineID ? (char *) pdu->securityEngineID : "",
                                     pdu->securityEngineIDLen));
         STOREPDU("securityName",
-                 newSVpv(pdu->securityName, pdu->securityNameLen));
+                 newSVpv(pdu->securityName ? (char *) pdu->securityName : "", pdu->securityNameLen));
     } else {
         STOREPDU("community",
-                 newSVpv(pdu->community, pdu->community_len));
+                 newSVpv(pdu->community ? (char *) pdu->community : "", pdu->community_len));
     }
 
     if (transport && transport->f_fmtaddr) {
