From 9dd4e0280eca2ba666cc0671ec3724610ed7d366 Mon Sep 17 00:00:00 2001
From: Tony Cook <tony@develop-help.com>
Date: Mon, 19 Feb 2018 15:11:42 +1100
Subject: (perl #132063) we should no longer warn for this code

The first patch for 132063 prevented the buffer read overflow when
dumping the warning but didn't fix the underlying problem.

The next change treats the supplied buffer correctly, preventing the
non-UTF-8 SV from being treated as UTF-8, preventing the warning.
---
 t/lib/warnings/regexec | 3 ---
 1 file changed, 3 deletions(-)

Index: perl-5.22.1/t/lib/warnings/regexec
===================================================================
--- perl-5.22.1.orig/t/lib/warnings/regexec	2018-04-05 08:46:08.431450103 -0400
+++ perl-5.22.1/t/lib/warnings/regexec	2018-04-05 08:46:08.431450103 -0400
@@ -215,8 +215,5 @@ Use of \b{} or \B{} for non-UTF-8 locale
 Use of \b{} or \B{} for non-UTF-8 locale is wrong.  Assuming a UTF-8 locale at - line 17.
 ########
 # NAME perl #132063, read beyond buffer end
-# OPTION fatal
 "\xff" =~ /(?il)\x{100}|\x{100}/;
 EXPECT
-Malformed UTF-8 character: \xff (too short; 1 byte available, need 13) in pattern match (m//) at - line 2.
-Malformed UTF-8 character (fatal) at - line 2.
