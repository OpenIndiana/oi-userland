From da63c35549e8852a410946ab016a3f25ac701bdf Mon Sep 17 00:00:00 2001
From: Albert Astals Cid <aacid@kde.org>
Date: Thu, 14 Sep 2017 19:14:41 +0200
Subject: FoFiType1C::convertToType0: Fix crash in broken files

Bug #102724

diff --git a/fofi/FoFiType1C.cc b/fofi/FoFiType1C.cc
index 7a82785..7c9494f 100644
--- a/fofi/FoFiType1C.cc
+++ b/fofi/FoFiType1C.cc
@@ -896,6 +896,9 @@
       }
     }
 
+    if (fd >= nFDs)
+      continue;
+
     // font dictionary (unencrypted section)
     (*outputFunc)(outputStream, "16 dict begin\n", 14);
     (*outputFunc)(outputStream, "/FontName /", 11);
