--- php-7.3.4/ext/sockets/config.m4.1	2019-05-05 11:41:39.792415162 +0000
+++ php-7.3.4/ext/sockets/config.m4	2019-05-05 11:42:39.489560663 +0000
@@ -82,7 +82,8 @@
 
   PHP_SOCKETS_CFLAGS=-DZEND_ENABLE_STATIC_TSRMLS_CACHE=1
   case $host_alias in
-  *darwin*) PHP_SOCKETS_CFLAGS="$PHP_SOCKETS_CFLAGS -D__APPLE_USE_RFC_3542"
+  *darwin*) PHP_SOCKETS_CFLAGS="$PHP_SOCKETS_CFLAGS -D__APPLE_USE_RFC_3542";;
+  *solaris*) PHP_SOCKETS_CFLAGS="$PHP_SOCKETS_CFLAGS -D_XPG4_2";;
   esac
   PHP_NEW_EXTENSION(
     [sockets],
