--- configure	2011-02-07 14:03:22.000000000 -0800
+++ configure	2011-11-14 10:38:12.200623852 -0800
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /bin/bash
 # From configure.in for Bash 4.2, version 4.037.
 # Guess values for system-dependent variables and create Makefiles.
 # Generated by GNU Autoconf 2.63 for bash 4.2-release.
@@ -13,6 +13,8 @@
 ## M4sh Initialization.  ##
 ## --------------------- ##
 
+export LD_OPTIONS="-lc -lm -lgen -lsocket -lnsl -lresolv -z ignore"
+
 # Be more Bourne compatible
 DUALCASE=1; export DUALCASE # for MKS sh
 if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
@@ -592,7 +594,7 @@
 subdirs=
 MFLAGS=
 MAKEFLAGS=
-SHELL=${CONFIG_SHELL-/bin/sh}
+SHELL=${CONFIG_SHELL-/bin/bash}
 
 # Identity of this package.
 PACKAGE_NAME='bash'
@@ -3498,7 +3500,7 @@
 sed 's/^/| /' conftest.$ac_ext >&5
 
 	ac_c_werror_flag=$ac_save_c_werror_flag
-	 CFLAGS="-g"
+	 CFLAGS=""
 	 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -3557,7 +3559,7 @@
   if test "$GCC" = yes; then
     CFLAGS="-g -O2"
   else
-    CFLAGS="-g"
+    CFLAGS=""
   fi
 else
   if test "$GCC" = yes; then
@@ -5019,7 +5021,7 @@
 
 
 
-test -z "$CFLAGS" && CFLAGS=-g auto_cflags=1
+test -z "$CFLAGS" && CFLAGS="${CFLAGS}" auto_cflags=1
 
 test -n "$GCC" && test -n "$auto_cflags" && CFLAGS="$CFLAGS -O2"
 
@@ -5051,7 +5053,7 @@
 	LDFLAGS_FOR_BUILD=${LDFLAGS_FOR_BUILD-""}
 fi
 
-test -z "$CFLAGS_FOR_BUILD" && CFLAGS_FOR_BUILD="-g"
+test -z "$CFLAGS_FOR_BUILD" && CFLAGS_FOR_BUILD=""
 
 
 
@@ -5176,9 +5178,14 @@
 int
 main ()
 {
+    #if defined(sun) || defined(__sun) || defined(__sun__)
+    #error "we want to use libcurses."
+    return 255;
+    #else
 return tgetent ();
   ;
   return 0;
+#endif
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
@@ -6083,7 +6090,7 @@
   $as_echo_n "(cached) " >&6
 else
   cat >conftest.make <<\_ACEOF
-SHELL = /bin/sh
+SHELL = /bin/bash
 all:
 	@echo '@@@%%%=$(MAKE)=@@@%%%'
 _ACEOF
@@ -6108,8 +6115,8 @@
 
 
 case "$host_os" in
-opennt*|interix*)	MAKE_SHELL="$INTERIX_ROOT/bin/sh" ;;
-*)			MAKE_SHELL=/bin/sh ;;
+opennt*|interix*)	MAKE_SHELL="$INTERIX_ROOT/bin/bash" ;;
+*)			MAKE_SHELL=/bin/bash ;;
 esac
 
 
@@ -7096,7 +7103,7 @@
 # Prepare PATH_SEPARATOR.
 # The user is always right.
 if test "${PATH_SEPARATOR+set}" != set; then
-  echo "#! /bin/sh" >conf$$.sh
+  echo "#! /bin/bash" >conf$$.sh
   echo  "exit 0"   >>conf$$.sh
   chmod +x conf$$.sh
   if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
@@ -7110,7 +7117,7 @@
 # Find out how to test for executable files. Don't use a zero-byte file,
 # as systems may use methods other than mode bits to determine executability.
 cat >conf$$.file <<_ASEOF
-#! /bin/sh
+#! /bin/bash
 exit 0
 _ASEOF
 chmod +x conf$$.file
@@ -7207,7 +7214,7 @@
 # Prepare PATH_SEPARATOR.
 # The user is always right.
 if test "${PATH_SEPARATOR+set}" != set; then
-  echo "#! /bin/sh" >conf$$.sh
+  echo "#! /bin/bash" >conf$$.sh
   echo  "exit 0"   >>conf$$.sh
   chmod +x conf$$.sh
   if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
@@ -7221,7 +7228,7 @@
 # Find out how to test for executable files. Don't use a zero-byte file,
 # as systems may use methods other than mode bits to determine executability.
 cat >conf$$.file <<_ASEOF
-#! /bin/sh
+#! /bin/bash
 exit 0
 _ASEOF
 chmod +x conf$$.file
@@ -7278,7 +7285,7 @@
 # Prepare PATH_SEPARATOR.
 # The user is always right.
 if test "${PATH_SEPARATOR+set}" != set; then
-  echo "#! /bin/sh" >conf$$.sh
+  echo "#! /bin/bash" >conf$$.sh
   echo  "exit 0"   >>conf$$.sh
   chmod +x conf$$.sh
   if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
@@ -7292,7 +7299,7 @@
 # Find out how to test for executable files. Don't use a zero-byte file,
 # as systems may use methods other than mode bits to determine executability.
 cat >conf$$.file <<_ASEOF
-#! /bin/sh
+#! /bin/bash
 exit 0
 _ASEOF
 chmod +x conf$$.file
@@ -8911,7 +8918,7 @@
 # Prepare PATH_SEPARATOR.
 # The user is always right.
 if test "${PATH_SEPARATOR+set}" != set; then
-  echo "#! /bin/sh" >conf$$.sh
+  echo "#! /bin/bash" >conf$$.sh
   echo  "exit 0"   >>conf$$.sh
   chmod +x conf$$.sh
   if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
@@ -9021,7 +9028,7 @@
 else
 
     CC="$CC" GCC="$GCC" LDFLAGS="$LDFLAGS" LD="$LD" with_gnu_ld="$with_gnu_ld" \
-    ${CONFIG_SHELL-/bin/sh} "$ac_aux_dir/config.rpath" "$host" > conftest.sh
+    ${CONFIG_SHELL-/bin/bash} "$ac_aux_dir/config.rpath" "$host" > conftest.sh
     . ./conftest.sh
     rm -f ./conftest.sh
     acl_cv_rpath=done
@@ -12962,39 +12969,19 @@
 /* end confdefs.h.  */
 /* Define isinf to an innocuous variant, in case <limits.h> declares isinf.
    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
-#define isinf innocuous_isinf
-
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char isinf (); below.
-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-    <limits.h> exists even on freestanding compilers.  */
-
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
-
-#undef isinf
 
+#include <math.h>
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char isinf ();
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
-#if defined __stub_isinf || defined __stub___isinf
-choke me
-#endif
 
 int
 main ()
 {
-return isinf ();
+return isinf (0.0);
   ;
   return 0;
 }
@@ -13054,39 +13041,25 @@
 /* end confdefs.h.  */
 /* Define isnan to an innocuous variant, in case <limits.h> declares isnan.
    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
-#define isnan innocuous_isnan
 
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char isnan (); below.
     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
     <limits.h> exists even on freestanding compilers.  */
 
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
-
-#undef isnan
+#include <math.h>
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char isnan ();
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
-#if defined __stub_isnan || defined __stub___isnan
-choke me
-#endif
 
 int
 main ()
 {
-return isnan ();
+return isnan (0.0);
   ;
   return 0;
 }
@@ -25754,7 +25727,7 @@
 exit 69
 ' >conftest
 chmod u+x conftest
-(SHELL=/bin/sh; export SHELL; ./conftest >/dev/null 2>&1)
+(SHELL=/bin/bash; export SHELL; ./conftest >/dev/null 2>&1)
 if test $? -ne 69; then
    ac_cv_sys_interpreter=yes
 else
@@ -30777,28 +30750,17 @@
 /* end confdefs.h.  */
 /* Define tgetent to an innocuous variant, in case <limits.h> declares tgetent.
    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
-#define tgetent innocuous_tgetent
 
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char tgetent (); below.
     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
     <limits.h> exists even on freestanding compilers.  */
 
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
-
-#undef tgetent
 
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char tgetent ();
+
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
@@ -30809,9 +30771,14 @@
 int
 main ()
 {
+#if defined(sun) || defined(__sun) || defined(__sun__)
+#error "we want to use libcurses."
+return 255;
+#else
 return tgetent ();
   ;
   return 0;
+#endif
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
@@ -30869,16 +30836,18 @@
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char tgetent ();
+
 int
 main ()
 {
+#if defined(sun) || defined(__sun) || defined(__sun__)
+#error "we want to use libcurses."
+return 255;
+#else
 return tgetent ();
   ;
   return 0;
+#endif
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
@@ -30937,16 +30906,18 @@
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char tgetent ();
+
 int
 main ()
 {
+#if defined(sun) || defined(__sun) || defined(__sun__)
+#error "we want to use libcurses."
+return 255;
+#else
 return tgetent ();
   ;
   return 0;
+#endif
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
@@ -31002,13 +30973,12 @@
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 
+#include <curses.h>
+#include <term.h>
+
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char tgetent ();
 int
 main ()
 {
@@ -31073,16 +31043,17 @@
 /* Override any GCC internal prototype to avoid an error.
    Use char because int might match the return type of a GCC
    builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char tgetent ();
 int
 main ()
 {
+#if defined(sun) || defined(__sun) || defined(__sun__)
+#error "we want to use libcurses."
+return 255;
+#else
 return tgetent ();
   ;
   return 0;
+#endif
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
@@ -31368,7 +31339,7 @@
 then
 	{ $as_echo "$as_me:$LINENO: checking shared object configuration for loadable builtins" >&5
 $as_echo_n "checking shared object configuration for loadable builtins... " >&6; }
-	eval `${CONFIG_SHELL-/bin/sh} ${srcdir}/support/shobj-conf -C "${CC}" -c "${host_cpu}" -o "${host_os}" -v "${host_vendor}"`
+	eval `${CONFIG_SHELL-/bin/bash} ${srcdir}/support/shobj-conf -C "${CC}" -c "${host_cpu}" -o "${host_os}" -v "${host_vendor}"`
 
 
 
